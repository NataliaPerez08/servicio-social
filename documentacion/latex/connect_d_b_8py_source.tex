\doxysection{connect\+DB.\+py}
\label{connect_d_b_8py_source}\index{Aplicacion/connectDB.py@{Aplicacion/connectDB.py}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{00002\ \textcolor{stringliteral}{Este\ modulo\ contiene\ las\ funciones\ para\ crear\ la\ tabla\ de\ registro\ de\ espectros\ y\ para\ realizar\ consultas\ a\ la\ base\ de\ datos}}
\DoxyCodeLine{00003\ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{00004\ }
\DoxyCodeLine{00005\ \textcolor{keyword}{import}\ sqlite3}
\DoxyCodeLine{00006\ }
\DoxyCodeLine{00007\ \textcolor{stringliteral}{"{}"{}"{}\ }}
\DoxyCodeLine{00008\ \textcolor{stringliteral}{Localización\ de\ la\ base\ de\ datos\ }}
\DoxyCodeLine{00009\ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{00010\ DATABASE\_FILE\ =\ \textcolor{stringliteral}{"{}../Aplicacion/db\_app.db"{}}}
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00012\ \textcolor{comment}{\#\ Mensaje\ a\ mostrar}}
\DoxyCodeLine{00013\ msg\ =\ \textcolor{stringliteral}{"{}La\ base\ de\ datos\ no\ existe"{}}}
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00015\ \textcolor{keyword}{def\ }create\_table\_registro\_espectros():}
\DoxyCodeLine{00016\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{00017\ \textcolor{stringliteral}{\ \ \ \ Método\ para\ crear\ la\ tabla\ de\ registro\ de\ espectros}}
\DoxyCodeLine{00018\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{00019\ \ \ \ \ \textcolor{comment}{\#\ Establece\ el\ nombre\ de\ la\ base\ de\ datos}}
\DoxyCodeLine{00020\ \ \ \ \ \textcolor{comment}{\#\ Revisa\ si\ la\ base\ de\ datos\ existe}}
\DoxyCodeLine{00021\ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{00022\ \ \ \ \ \ \ \ \ open(DATABASE\_FILE)}
\DoxyCodeLine{00023\ \ \ \ \ \textcolor{keywordflow}{except}\ IOError:}
\DoxyCodeLine{00024\ \ \ \ \ \ \ \ \ print(msg)}
\DoxyCodeLine{00025\ \ \ \ \ \ \ \ \ exit()}
\DoxyCodeLine{00026\ \ \ \ \ \textcolor{comment}{\#\ Crea\ la\ conexion\ a\ la\ base\ de\ datos}}
\DoxyCodeLine{00027\ \ \ \ \ connection\ =\ sqlite3.connect(DATABASE\_FILE)}
\DoxyCodeLine{00028\ \ \ \ \ \textcolor{comment}{\#\ Crea\ el\ cursor\ para\ ejecutar\ las\ consultas}}
\DoxyCodeLine{00029\ \ \ \ \ cursor\ =\ connection.cursor()}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \ \ \ \ \textcolor{comment}{\#\ Crea\ la\ tabla\ de\ registro\ de\ espectros}}
\DoxyCodeLine{00032\ \ \ \ \ cursor.execute(\textcolor{stringliteral}{"{}CREATE\ TABLE\ registro\_espectros\ (Espectro\ text,\ Carpeta\ text,\ Tabla\ text,\ Pigmento\ text,\ Aglutinante\ text,\ Base\_de\_preparacion\ text)"{}})}
\DoxyCodeLine{00033\ \ \ \ \ \textcolor{comment}{\#\ Confirma\ la\ creacion\ de\ la\ tabla}}
\DoxyCodeLine{00034\ \ \ \ \ connection.commit()}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ \ \ \ \ \textcolor{comment}{\#\ Cierre\ de\ la\ conexion\ a\ la\ base\ de\ datos}}
\DoxyCodeLine{00037\ \ \ \ \ connection.close()}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \textcolor{keyword}{def\ }consulta\_db(consulta):}
\DoxyCodeLine{00041\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{00042\ \textcolor{stringliteral}{\ \ \ \ Método\ para\ realizar\ una\ consulta\ a\ la\ base\ de\ datos}}
\DoxyCodeLine{00043\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ @args:\ consulta:\ consulta\ (query)\ a\ realizar}}
\DoxyCodeLine{00044\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ @return:\ resultados\ de\ la\ consulta}}
\DoxyCodeLine{00045\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{00046\ \ \ \ \ \textcolor{comment}{\#\ Revisa\ si\ la\ base\ de\ datos\ existe}}
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ open(DATABASE\_FILE)}
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{keywordflow}{except}\ IOError:}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ print(msg)}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ exit()}
\DoxyCodeLine{00052\ \ \ \ \ \textcolor{comment}{\#\ Crea\ la\ conexion\ a\ la\ base\ de\ datos}}
\DoxyCodeLine{00053\ \ \ \ \ connection\ =\ sqlite3.connect(DATABASE\_FILE)}
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{comment}{\#\ Crea\ el\ cursor\ para\ ejecutar\ las\ consultas}}
\DoxyCodeLine{00055\ \ \ \ \ cursor\ =\ connection.cursor()}
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{comment}{\#\ Ejecuta\ la\ consulta}}
\DoxyCodeLine{00057\ \ \ \ \ cursor.execute(consulta)}
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{comment}{\#\ Guarda\ los\ resultados}}
\DoxyCodeLine{00059\ \ \ \ \ resultados\ =\ cursor.fetchall()}
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{comment}{\#\ Confirma\ la\ creacion\ de\ la\ tabla}}
\DoxyCodeLine{00061\ \ \ \ \ connection.commit()}
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{comment}{\#\ Cierre\ de\ la\ conexion\ a\ la\ base\ de\ datos}}
\DoxyCodeLine{00063\ \ \ \ \ connection.close()}
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{comment}{\#\ Retorna\ los\ resultados}}
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{keywordflow}{return}\ resultados}

\end{DoxyCode}
